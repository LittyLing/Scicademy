<!DOCTYPE HTML>
<html>
<head>
	<meta charset="UTF-8">
	<title>Aliro</title>
	<link rel= "SHORTCUT ICON" href="images/lambda_16x16.png" />
	<link href="css/sm-core-css.css" rel="stylesheet" type="text/css">
	<link href="css/sm-simple.css" rel="stylesheet" type="text/css">
	<link href="css/jquery-ui.min.css" rel="stylesheet">
	<link href="css/signInCss.css" rel="stylesheet">
	<link href="css/searchBox.css" rel="stylesheet" type="text/css">
	<link href="css/results.css" rel="stylesheet" type="text/css">
	<link href="css/pageStyle.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Ubuntu:regular,bold&subset=Latin">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<!--<script src="libs/jquery-1.11.3.min.js"></script>-->
	<script src="libs/jquery-ui.min.js"></script>
	<script src="libs/jquery.smartmenus.min.js"></script>
	<script src="javascript/index-logic.js"></script>
</head>

<body class="colorBody">
	<script type="text/javascript"> 
	var currentUser = null;
		$(document).ready(function(){
		//load the navBar and signIn box.
			$.getScript('javascript/index-logic.js', function(jd){});
		});
	</script>
	<script>
		$(document).ready(function() {
			$( "#dateOptions" ).position({
				  my: "left top",
				  at: "left-3 bottom+10",
				  of: "#dates h6"
			});	//end position
			var url= window.location.href;
			var queryString=url.slice(url.indexOf('?query=')+1); //entire query stuff, after the results.html path
			var queryNum=url.slice(url.indexOf('?query=')+7); //just the number for the query variable
			var resultNum=queryString.indexOf('result=');
			var tempResult; //indicates upperBound. return papers 1-20. If the number was 40, the program would return papers 21-40.
			if(resultNum==-1){
				tempResult=20;
			}
			else{
				var resultString=queryString.slice(queryString.indexOf('result='));
				tempResult=resultString.slice(7);
			}
			var searchData={
				query:queryString,
				result:tempResult	 //indicates upperBound. return papers 1-20. If the number was 40, the program would return papers 21-40.
			}
			<!-- $.getJSON('getPapers.js', searchData, addPapers); -->
 	
		<!--format of paper returned in json format. Example -->
			
			var data={
				paper1:{
					"title":"Title of Paper",
					"authors":{
						"author1":{
							"name":"Larry Page",
							"userPage":"user.html/userID"
						},
						"author2":{
							"name":"Sergey Brin",
							"userPage":"user.html/userID"
						}
					},
					"abstract":"asdkfla",
					"paperLink":"paper.html/paperID"
				},
				paper2:{
					"title":"Title of Paper",
					"authors":{
						"author1":{
							"name":"John Smith",
							"userPage":"user.html/userID"
						},
						"author2":{
							"name":"Joe Doe",
							"userPage":"user.html/userID"
						}
					},
					"abstract":"Ipsum Lorum blah blah blah",
					"paperLink":"paper.html/paperID"
				}
				//etc. etc. 20 times max, since only 20 papers on page
			}
			
			<!-- function addPapers(data){ -->
				var title='';
				var authors='';
				var abstractText='';
				var paperLink='';
				var firstAuthor=true;
				
				var paperHtml='';
				$.each(data, function(paper, paperInfo){ //iterature through each paper
					console.log('p: '+paper+'='+paperInfo);
					$.each(paperInfo, function(infoName, info){ //loop through each piece of info in the paper
						if(typeof info === 'object'){ //going into the authors
							//then it's authors
							$.each(info, function(authorNum, value){
								if(!firstAuthor){
									authors+=',&nbsp;&nbsp;';
								}
								else{
									authors+='<div class="authors">';
									firstAuthor=false;
								}
								// value.name gets their name, value.userPage gets their userPage
								authors+='<a href="'+value.userPage+'">'+value.name+'</a>';
							}); //end author loop
							firstAuthor=true;
						} //end author selection
						else{ //every piece of info but authors
							if(infoName == 'title'){
								console.log(title);
								title=info;
							}
							else if (infoName == 'abstract'){
								abstractText=info;
							}
							else if (infoName == 'paperLink'){
								paperLink=info;
							}
						} //end else for everything but authors
					}); //end loop through for each piece of info in paper
					paperHtml='<div class="paperDiv">\
									<span class="title">\
										<a href="'+paperLink+'"><h3>'+title+'</h3></a>\
									</span>'+authors+'</div>\
									<div class="abstractDiv">\
										<a class="abstractText">\
											<span class="arrowClick arrowSide"></span>\
											<span class="preTxt">Abstract</span>\
										</a>\
										<div class="abstractParagraph" id="abstract1">'+abstractText+'</div>\
									</div>\
								</div>\
								<div class="separator"></div>'
					$('.papers').append(paperHtml);
					authors='';
				}); //end loop for each paper
			
			<!-- } --> //end addPapers
			
			$('.abstractDiv').click(function(){
				//slide in abstract text using ajax
				$(this).find('.arrowClick').toggleClass('arrowSide');
				<!-- $('.abstractParagraph').slideToggle(); -->
				$(this).find('.abstractParagraph').slideToggle();
				return false;
			}); //end abstractText click
			
		}); //end ready
	</script>
	<div class="navigation"></div>
	<div id="signInBox"></div>
	<div class="grid">
		<div class="searchBoxDiv" id="search-form">
			<!--<div id="logo"><img src="images/logo.png"></div>-->
			<form class="form-container" action="">
				<input type="text" class="search-field" id="searchBox" placeholder="Find Research" maxlength="2048"  />
				<div class="submit-container">
					<input type="submit" value="" class="submit" id="searchBoxSubmit" />
					
				</div>
			</form>
		</div>
		<div id="searchTableDiv">
					<div class="searchInfo">
						<div class="searchBy">
							<h4>Search In:</h4>
							<div id="searchOptions">
								<input type="radio" name="searchOptions" value="All" class="searchBy" checked="checked">All Fields</input><br>
								<input type="radio" name="searchOptions" value="Title" class="searchBy">Title</input><br>
								<input type="radio" name="searchOptions" value="Abstract" class="searchBy">Abstract</input><br>
								<input type="radio" name="searchOptions" value="Author" class="searchBy">Author</input>
							</div>
						</div>
						<div class="sortBy">
							<h4>Sort By:</h4>
							<div id="dates">
							<h6>Date:</h6>
								<div id="dateOptions">
								<input type="checkbox" name="date" value="2015" class="dateButtons">We will get Current Dates of papers with AJAX from servers</input>
								<br>
								<input type="checkbox" name="date" value="2015" class="dateButtons">2015</input>
								</div>
							</div>
						</div>
					</div>
					<div class="papers">
						<!-- paper info here-->
						<div class="paperDiv" id="firstPaper">
							<span class="title">
								<a href="paper.html">Title of Paper</a>
							</span>
							<div class="authors"><a href="linkToAramProfile.html">Baghdassarian A</a>,&nbsp;&nbsp;<a href="linkToJesseProfile.html">Smith J</a></div>
							<div class="abstractDiv">
								<a class="abstractText">
									<span class="arrowClick arrowSide"></span>
									<span class="preTxt">Abstract</span>
								</a>
								<div class="abstractParagraph" id="abstract1">
									Lorem ipsum dolor sit amet, consectetur adipiscing elit. In pharetra vitae tellus non mattis. Aenean varius tellus erat, ac elementum risus vulputate vel. Quisque laoreet est vel ex pulvinar rutrum. Maecenas in ornare mi. Etiam ut sollicitudin elit, sit amet auctor sapien. Duis a eleifend felis, sollicitudin egestas purus. Cras molestie sapien quis nisl faucibus tempus. Phasellus dignissim suscipit libero eget laoreet. Suspendisse eget est felis. Fusce sodales, arcu at lacinia semper, quam metus fringilla velit, eget hendrerit diam orci elementum dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec suscipit, elit non aliquet malesuada, augue sapien gravida quam, ac feugiat lorem turpis a turpis. Vestibulum erat ipsum, efficitur vel interdum fringilla, vulputate nec neque. Donec aliquet orci lorem, a commodo lectus tristique non.
								</div>
							</div>
							
						</div>
						<div class="separator"></div>
					</div>
<!-- 					<div class="pagination">
						<span class="inactive page_link" title="Inactive first page of results"><< First</span>
						<span class="inactive page_link prev" title="Inactive previous page of results">< Prev</span>
						<h3 class="page">
						<label for="pageEnter">Page </label>
						<input id="pageEnter" class="num" type="text" value="1" name="pageEnter">
						of 11
						</h3>
						<a id="nexPage" class="active page_link next" accesskey="k" href="#" title="Next page of results" name="nextPage">Next ></a>
						<a id="lastPage" class="active page_link" href="#" title="Last page of results" name="lastPage">Last >></a>
						</div>
					</div> -->
	</div>
</body>
</html>
	
